# 设计模式 

## 一：前言

### 目的：

设计模式的目的：使代码**可复用**。不能以算法的思想去学。所有的设计模式都是以复用性为基础，然后再来寻求面向对象的抽象设计方案。有可能我们在使用面向对象的语言，仍然使用着结构化的思维，所以要培养面向对象的思维。

### 面向对象设计原则

面向对象的特征：

1. 封装：隐藏内部实现
2. 继承：复用现有代码
3. 多态：改写对象行为

原则：

1）

<img src="img/依赖倒置原则.png" style="zoom:50%;" />

依赖倒置原则使我想到一个例子，在仓库模式之中，ViewModel是高层模块，Repository是低层模块，然后我之前的一个错误做法就是用依赖注入给ViewModel注入具体实现，比如说：

```
class MyViewModel(val realRepository: RealRepository){...}
```

但低层模块是会变化的，当我想测试时，我想提供一个假数据的repository比如说FakeRepository，那么这个时候我就要更改ViewModel的实现，转而依赖FakeRepository。

但假如我应用**二者都应该依赖抽象**，我创建一个抽象的Repository类，里面定义抽象方法，然后ViewModel依赖这个抽象的类，我可以随意创建子类来实现repository类，然后我需要什么，就更改传进ViewModel里面的具体实现就行了。

这样软件的稳定性就得到了提高。

其实这里还使用了第6点和8点。



2）

![](img/开放封闭原则.png)

一个设计良好的类，利用各种修饰符，protected, abstract...天然就是符合开放封闭原则的。



3）

![](img/单一职责.png)

这个其实挺难应用的，有时候一个类只承担一个职责，当代码很简单的时候，却要写多个类，会在早期过度设计。



4）

![](img/子类替换原则.png)



5）

![](img/接口隔离.png)



6）

![](img/组合而不是继承.png)

其实这些原则要结合在一起看的，如果组合的类之间只暴露必要的接口（第五条），那么组合可以使得代码之间更清晰，耦合度低。



7）

![](img/封装变化点.png)



8）

![](img/针对接口编程.png)





### 为什么面向对象

变化是复用的天敌！面向对象设计模式的最大优势在于——**抵御变化**，

